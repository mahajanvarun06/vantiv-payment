<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="initial-scale=1, maximum-scale=1, user-scalable=no, width=device-width">
    <title></title>
    <link href="https://fonts.googleapis.com/css?family=Raleway:400,800" rel="stylesheet">
    <link href="css/app.css" rel="stylesheet">
    <script type="text/javascript">
      if(!document.getElementById('hScript')){
        var script = document.createElement("script");
        script.id = "hScript";
        script.type = "text/javascript";
        script.src = 'https://api2.heartlandportico.com/SecureSubmit.v1/token/2.1/securesubmit.js';
        script.onload = function(){
          setTimeout(function(){
            initPayform();
          },1000);
        }
        document.head.appendChild(script);
      }
      var hObj = null;
      window.heartlandCss = {
  'input[type=text],input[type=tel]': {
    'box-sizing':'border-box',
    'display': 'block',
    'width': '100%',
    'height': '34px',
    'padding': '6px 12px',
    'font-size': '14px',
    'line-height': '1.42857143',
    'color': '#555',
    'background-color': '#fff',
    'background-image': 'none',
    'border': '1px solid #ccc',
    'border-radius': '4px',
    '-webkit-box-shadow': 'inset 0 1px 1px rgba(0,0,0,.075)',
    'box-shadow': 'inset 0 1px 1px rgba(0,0,0,.075)',
    '-webkit-transition': 'border-color ease-in-out .15s,-webkit-box-shadow ease-in-out .15s',
    '-o-transition': 'border-color ease-in-out .15s,box-shadow ease-in-out .15s',
    'transition': 'border-color ease-in-out .15s,box-shadow ease-in-out .15s'
  },
  'input[type=text]:focus,input[type=tel]:focus': {
    'border-color': '#66afe9',
    'outline': '0',
    '-webkit-box-shadow': 'inset 0 1px 1px rgba(0,0,0,.075),0 0 8px rgba(102,175,233,.6)',
    'box-shadow': 'inset 0 1px 1px rgba(0,0,0,.075),0 0 8px rgba(102,175,233,.6)'
  },
  'input[type=submit]' : {
    'min-height': '48px',
    'opacity': '1',
    'background': 'linear-gradient(to bottom, #da291c 0%, #da291c 100%)',
    'width': '80%',
    'margin': 'auto',
    'max-width': '200px',
    'border-radius': '41px',
    'margin-bottom': '20px',
    'line-height': '12px',
    'display': 'block',
    'color': '#fff',
    'cursor': 'pointer',
    'border-width': '1px',
    'margin-top': '10px',
    'border-style': 'solid'
  }};
      var pkey = location.hash.split("=");
      function initPayform(){
        hObj = new Heartland.HPS({
            publicKey: pkey,
            type: 'iframe',
            fields: {
                cardNumber: {
                    target: 'iframesCardNumber',
                    placeholder: '•••• •••• •••• ••••'
                },
                cardExpiration: {
                    target: 'iframesCardExpiration',
                    placeholder: 'MM / YYYY'
                },
                cardCvv: {
                    target: 'iframesCardCvv',
                    placeholder: 'CVV'
                },
                submit: {
                    value: 'Checkout',
                    target: 'process-heartland'
                }
            },
            style: window.heartlandCss,
            onTokenSuccess: function (resp) {
              console.log('S', resp);
                //$rootScope.$emit('HeartlandSuccessCase', JSON.stringify(resp));
            },
            onTokenError: function (resp) {
                console.log('Heartland Error', resp);
                //$rootScope.heartlandError = resp.error.message;
            }
        });
      }
    </script>
  </head>
  <body >
    <div>
      CC Details
      <form type="post">
        <div class="row">
          <div class="lab">Card Number</div>
          <div class="inp"><div type="text" id="iframesCardNumber"></div></div>
        </div>
        <div class="row">
          <div class="lab">Expiration</div>
          <div class="inp"><div type="text" id="iframesCardExpiration"></div></div>
        </div>
        <div class="row">
          <div class="lab">CVV</div>
          <div class="inp"><div type="text" id="iframesCardCvv"></div></div>
        </div>
        <div class="row">
          <div class="inp"><div type="submit" id="process-heartland" value="Submit"></div></div>
        </div>
      </form>
    </div>
  </body>
</html>
